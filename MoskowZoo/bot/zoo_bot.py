import telebot
import re
from telebot import types
from config import TOKEN
from extensions import InputException
from questions import QuestionsAboutAnimals


# 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–æ—Ç–∞
bot = telebot.TeleBot(TOKEN)


# 2. –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º (/start –∏ /help).
@bot.message_handler(commands=['start', 'help'])
def start(message):
    photo = open("MZoo-logo since 1864-vert-rus_preview-01.jpg", "rb")
    text = ('üëãüèº –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π! –¢—ã –ø–æ–ø–∞–ª –Ω–∞ –≤–∏–∫—Ç–æ—Ä–∏–Ω—É, —Å–≤—è–∑–∞–Ω–Ω—É—é —Å –ú–æ—Å–∫–æ–≤—Å–∫–∏–º –∑–æ–æ–ø–∞—Ä–∫–æ–º, \
–Ω–∞ —Ç–µ–º—É "–ö–∞–∫–æ–µ —É –≤–∞—Å —Ç–æ—Ç–µ–º–Ω–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ?". \n\n–ì–æ—Ç–æ–≤—ã –ª–∏ –≤—ã –ø–æ–≥—Ä—É–∑–∏—Ç—å—Å—è –≤ –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö \
–∑–æ–æ–ø–∞—Ä–∫–æ–≤ –ï–≤—Ä–æ–ø—ã, –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –µ–≥–æ –æ–±–∏—Ç–∞—Ç–µ–ª—è–º–∏ –≤ —Ñ–æ—Ä–º–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã –∏ –≤–µ—Å–µ–ª–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –≤—Ä–µ–º—è? \n\n\
–¢–æ–≥–¥–∞ –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ ‚Äì "–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç". \n\n‚ÄºÔ∏è –î–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–æ–∂–µ—Ç–µ —Ç–∞–∫–∂–µ —Å–≤—è–∑–∞—Ç—å—Å—è \
—Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º –∑–æ–æ–ø–∞—Ä–∫–∞, –Ω–∞–∂–∞–≤ –ø–æ –∫–Ω–æ–ø–∫–µ –Ω–∏–∂–µ.')
    bot.send_message(message.chat.id, text)
    bot.send_photo(message.chat.id, photo=photo)
    button_start(message)


# 3. –í—ã–≤–æ–¥ –∫–Ω–æ–ø–æ–∫ "–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç" –∏ "–°–≤—è–∑–∞—Ç—å—Å—è —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º –∑–æ–æ–ø–∞—Ä–∫–∞".
@bot.message_handler(commands=['button'])
def button_start(message):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    item1 = types.KeyboardButton("–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç")
    item2 = types.KeyboardButton("–°–≤—è–∑–∞—Ç—å—Å—è —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º –∑–æ–æ–ø–∞—Ä–∫–∞")
    markup.add(item1)
    markup.add(item2)
    bot.send_message(message.chat.id, '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ:', reply_markup=markup)


# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–≤–æ–¥–∞ –Ω–∞ –æ—à–∏–±–∫—É.
@bot.message_handler(func=lambda message: True)
def handle_text(message):
    try:
        if message.text.lower() != '–Ω–∞—á–∞—Ç—å —Ç–µ—Å—Ç':
            if message.text.lower() != '—Å–≤—è–∑–∞—Ç—å—Å—è —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º –∑–æ–æ–ø–∞—Ä–∫–∞':
                raise InputException("–í–≤–µ–¥–µ–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!")
        if message.text.lower() == '–Ω–∞—á–∞—Ç—å —Ç–µ—Å—Ç':
            ask_question(message)
        elif message.text.lower() == '—Å–≤—è–∑–∞—Ç—å—Å—è —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º –∑–æ–æ–ø–∞—Ä–∫–∞':
            contact_zoo_staff(message)
    except InputException as e:
        bot.reply_to(message, f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è: \n{e}")


# 5. –§—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∑–æ–æ–ø–∞—Ä–∫–∞.
def contact_zoo_staff(message):
    keyboard = types.InlineKeyboardMarkup()
    url_button = types.InlineKeyboardButton(text="–°–≤—è–∑–∞—Ç—å—Å—è —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º –∑–æ–æ–ø–∞—Ä–∫–∞", url="https://t.me/alexandetto")
    keyboard.add(url_button)
    bot.send_message(message.chat.id, "–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ:", reply_markup=keyboard)


# 6. –§—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ –∫–Ω–æ–ø–æ–∫ —Å –æ—Ç–≤–µ—Ç–∞–º–∏.
k = -1
def output_question_and_answers(message):
    global k
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    buttons = []
    k += 1
    for var in list(QuestionsAboutAnimals.items())[k][1]:
        buttons.append(types.KeyboardButton(text=var))
    keyboard.add(*buttons)

    return keyboard


# 7. –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫–æ–ª—å—Ü–µ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã –º–µ—Ç–æ–¥–∞.
def ask_question(message: types.Message):
    global k
    if re.search(r'^(?:\d\.\s|–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç)', message.text):
        kb = output_question_and_answers(message)
        msg = bot.send_message(message.chat.id, text=list(QuestionsAboutAnimals.items())[k][0], reply_markup=kb)
    else:
        msg = bot.send_message(message.chat.id, text="–ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ, –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –¥–∞—Ç—å –æ—Ç–≤–µ—Ç!")
    bot.register_next_step_handler(msg, process_answer)


# 8. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞.
def process_answer(message):
    —Å1 = 0
    —Å2 = 0
    —Å3 = 0
    —Å4 = 0
    counts = {'1.': 0, '2.': 0, '3.': 0, '4.': 0}
    if output_question_and_answers(message) == buttons[0]:
        counts.update({'1.': —Å1 + 1})
    elif output_question_and_answers(message) == buttons[1]:
        counts.update({'2.': —Å2 + 1})
    elif output_question_and_answers(message) == buttons[2]:
        counts.update({'3.': —Å3 + 1})
    elif output_question_and_answers(message) == buttons[3]:
        counts.update({'4.': —Å4 + 1})

    return counts

def calculation_results(counts, message):
    max_count = max(counts.values())
    max_categories = [cat for cat, count in counts.items() if count == max_count]

    totem_info = {
        '1.': ("–í–æ–ª–∫ - —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç —Å–≤–æ–±–æ–¥—É –∏ –∏–Ω—Ç—É–∏—Ü–∏—é. –í–æ–ª–∫–∏ –∏–∑–≤–µ—Å—Ç–Ω—ã —Å–≤–æ–µ–π —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–æ—Å—Ç—å—é, –∂–∏–≤—É—Ç –∏ –æ—Ö–æ—Ç—è—Ç—Å—è –≤ —Å—Ç–∞—è—Ö, —á—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ –∏—Ö –≥–ª—É–±–æ–∫–∏—Ö —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–≤—è–∑—è—Ö. –û–Ω–∏ –æ–±–ª–∞–¥–∞—é—Ç –≤—ã–¥–∞—é—â–∏–º–∏—Å—è –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏, –ø–æ–º–æ–≥–∞—é—â–∏–º–∏ –∏–º –≤—ã–∂–∏–≤–∞—Ç—å –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ. –í–æ–ª–∫ —Ç–∞–∫–∂–µ —è–≤–ª—è–µ—Ç—Å—è —Å–∏–º–≤–æ–ª–æ–º —Å–≤–æ–±–æ–¥—ã –¥—É—Ö–∞, —Å–º–µ–ª–æ—Å—Ç–∏ –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –æ–Ω –Ω–µ –±–æ–∏—Ç—Å—è –∏–¥—Ç–∏ —Å–≤–æ–∏–º –ø—É—Ç–µ–º.", "https://media.istockphoto.com/id/177794699/ru/%D1%84%D0%BE%D1%82%D0%BE/%D1%81%D0%B5%D1%80%D1%8B%D0%B9-%D0%B2%D0%BE%D0%BB%D0%BA-%D0%BF%D0%BE%D1%80%D1%82%D1%80%D0%B5%D1%82.jpg?s=612x612&w=0&k=20&c=zTMmfuCxFPLGdvQkmS3Xb6MVY7E-wk5nf3lnuVbTc4Q="),
        '2.': ("–ú–µ–¥–≤–µ–¥—å - –æ–ª–∏—Ü–µ—Ç–≤–æ—Ä—è–µ—Ç —Å–∏–ª—É –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å. –ú–µ–¥–≤–µ–¥—å ‚Äî –º–æ—â–Ω–æ–µ –∏ –≤–Ω—É—à–∞—é—â–µ–µ —É–≤–∞–∂–µ–Ω–∏–µ –∂–∏–≤–æ—Ç–Ω–æ–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç –ª–∏–¥–µ—Ä—Å—Ç–≤–æ –∏ —Å–∏–ª—É. –û–Ω —Ç–∞–∫–∂–µ –∞—Å—Å–æ—Ü–∏–∏—Ä—É–µ—Ç—Å—è —Å –∑–∞—â–∏—Ç–æ–π, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é –∏ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å—é. –ú–µ–¥–≤–µ–¥–∏ —Å–ø–æ—Å–æ–±–Ω—ã –∫ –≥–ª—É–±–æ–∫–æ–º—É —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—é –∏ –º–µ–¥–∏—Ç–∞—Ü–∏–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –≤–æ –≤—Ä–µ–º—è –∑–∏–º–Ω–µ–π —Å–ø—è—á–∫–∏, —á—Ç–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç –∏—Ö —Å–≤—è–∑—å —Å –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–∏–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ —Å–æ–∑–Ω–∞–Ω–∏—è –∏ –∏–Ω—Ç—É–∏—Ü–∏–µ–π.", "https://img.freepik.com/free-photo/majestic-large-mammal-walking-in-snowy-forest-generative-ai_188544-36924.jpg"),
        '3.': ("–õ–æ—à–∞–¥—å - —Å–∏–º–≤–æ–ª —Å–≤–æ–±–æ–¥—ã –∏ –º–æ—â–∏. –õ–æ—à–∞–¥–∏ ‚Äî —Å—É—â–µ—Å—Ç–≤–∞, –∏–∑–ª—É—á–∞—é—â–∏–µ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ—Å—Ç—å –∏ –º–æ—â—å, —Å–ø–æ—Å–æ–±–Ω—ã–µ –±—ã—Å—Ç—Ä–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –∏ –ø—Ä–µ–æ–¥–æ–ª–µ–≤–∞—Ç—å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è. –û–Ω–∏ —Ç–∞–∫–∂–µ –∞—Å—Å–æ—Ü–∏–∏—Ä—É—é—Ç—Å—è —Å–æ —Å–≤–æ–±–æ–¥–æ–π, –ø–æ—Å–∫–æ–ª—å–∫—É –∏—Ö –≥—Ä–∞—Ü–∏–æ–∑–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∏ —Å–∏–ª–∞ –¥—É—Ö–∞ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—Ç –Ω–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –æ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∏ —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–≤–æ–∏–º –∂–µ–ª–∞–Ω–∏—è–º.", "https://basetop.ru/wp-content/uploads/2019/03/itrttzwr.jpg"),
        '4.': ("–°–æ–≤–∞ - –º—É–¥—Ä–æ—Å—Ç—å –∏ –∑–∞–≥–∞–¥–æ—á–Ω–æ—Å—Ç—å. –°–æ–≤—ã, —Å –∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é –≤–∏–¥–µ—Ç—å –≤ —Ç–µ–º–Ω–æ—Ç–µ, —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É—é—Ç –≥–ª—É–±–æ–∫—É—é –∏–Ω—Ç—É–∏—Ü–∏—é –∏ –∑–Ω–∞–Ω–∏–µ —Ç–∞–π–Ω–æ–≥–æ. –≠—Ç–∏ –ø—Ç–∏—Ü—ã —á–∞—Å—Ç–æ –∞—Å—Å–æ—Ü–∏–∏—Ä—É—é—Ç—Å—è —Å –º—É–¥—Ä–æ—Å—Ç—å—é, –ø–æ—Å–∫–æ–ª—å–∫—É –∏—Ö –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–∏–¥–µ—Ç—å —Ç–æ, —á—Ç–æ —Å–∫—Ä—ã—Ç–æ –æ—Ç –¥—Ä—É–≥–∏—Ö, –¥–µ–ª–∞–µ—Ç –∏—Ö —Å–∏–º–≤–æ–ª–æ–º –∑–Ω–∞–Ω–∏—è –∏ –∑–∞–≥–∞–¥–æ—á–Ω–æ—Å—Ç–∏.", "https://img.freepik.com/premium-photo/beautiful-owl_254845-8286.jpg"),
        ('1.', '2.'): ("–û–ª–µ–Ω—å - –∏–∑—è—â–µ—Å—Ç–≤–æ –∏ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ. –û–ª–µ–Ω–∏ ‚Äî —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–µ –∂–∏–≤–æ—Ç–Ω—ã–µ, –¥–≤–∏–∂–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞–ø–æ–ª–Ω–µ–Ω—ã –≥—Ä–∞—Ü–∏–µ–π –∏ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ–º. –û–Ω–∏ –Ω–∞–ø–æ–º–∏–Ω–∞—é—Ç –æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –±—ã—Ç—å –ª–µ–≥–∫–∏–º –Ω–∞ –ø–æ–¥—ä–µ–º –∏ —Å–ø–æ—Å–æ–±–Ω—ã–º –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–∏ —ç—Ç–æ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –∏ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ.", "https://media.istockphoto.com/id/140157656/ru/%D1%84%D0%BE%D1%82%D0%BE/%D0%BF%D0%BE%D1%80%D1%82%D1%80%D0%B5%D1%82-%D0%B2%D0%B5%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9-%D0%BA%D1%80%D0%B0%D1%81%D0%BD%D1%8B%D0%B9-%D0%BE%D0%BB%D0%B5%D0%BD%D1%8C-%D0%BE%D0%BB%D0%B5%D0%BD%D1%8C-%D0%B2-%D0%BE%D1%81%D0%B5%D0%BD%D1%8C-%D0%BE%D1%81%D0%B5%D0%BD%D1%8C.jpg?s=612x612&w=0&k=20&c=rCL1dxZz0DdUgcxYEH5a9VZzSpRV15Wx4RY9A_91ovE="),
        ('1.', '3.'): ("–î–µ–ª—å—Ñ–∏–Ω - –∏–≥—Ä–∏–≤–æ—Å—Ç—å –∏ –≥–∞—Ä–º–æ–Ω–∏—è. –î–µ–ª—å—Ñ–∏–Ω—ã –∏–∑–≤–µ—Å—Ç–Ω—ã —Å–≤–æ–µ–π –¥—Ä—É–∂–µ–ª—é–±–Ω–æ—Å—Ç—å—é, –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º –∏ –ª—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ–º. –û–Ω–∏ –Ω–∞–ø–æ–º–∏–Ω–∞—é—Ç –æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ª–µ–≥–∫–æ—Å—Ç—å –±—ã—Ç–∏—è, –Ω–∞—Å–ª–∞–∂–¥–∞—Ç—å—Å—è –æ–±—â–µ–Ω–∏–µ–º –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–∞–¥–æ—Å—Ç—å –≤ –ø—Ä–æ—Å—Ç—ã—Ö –≤–µ—â–∞—Ö, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—è –ø—Ä–∏ —ç—Ç–æ–º –≥–∞—Ä–º–æ–Ω–∏—é —Å –æ–∫—Ä—É–∂–∞—é—â–∏–º –º–∏—Ä–æ–º.", "https://img.freepik.com/free-photo/beautiful-dolphin-jumping-out-of-water_23-2150770795.jpg"),
        ('1.', '4.'): ("–ü—É–º–∞ - —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å. –ü—É–º—ã ‚Äî —Å–∏–ª—å–Ω—ã–µ –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ö–∏—â–Ω–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É—é—Ç—Å—è —Å–≤–æ–µ–π –∏–Ω—Ç—É–∏—Ü–∏–µ–π –∏ –∏–º–µ—é—Ç —Å–∏–ª—å–Ω—ã–π –¥—É—Ö. –û–Ω–∏ –æ–ª–∏—Ü–µ—Ç–≤–æ—Ä—è—é—Ç —Å–º–µ–ª–æ—Å—Ç—å –∏–¥—Ç–∏ —Å–≤–æ–∏–º", "https://media.istockphoto.com/id/1392544996/ru/%D1%84%D0%BE%D1%82%D0%BE/%D0%BF%D1%83%D0%BC%D0%B0-%D0%BF%D0%BE%D1%80%D1%82%D1%80%D0%B5%D1%82-%D0%BA%D1%80%D1%83%D0%BF%D0%BD%D1%8B%D0%BC-%D0%BF%D0%BB%D0%B0%D0%BD%D0%BE%D0%BC.jpg?s=612x612&w=0&k=20&c=6O2DD9DtRtRcjrlrZjXdONhEZK67Bn_rhjFG8YKAfP4="),
        ('2.', '3.'): ("–û—Ä—ë–ª - —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç –æ—Å—Ç—Ä–æ—Ç—É –∑—Ä–µ–Ω–∏—è –∏ —Å–≤–æ–±–æ–¥—É –¥—É—Ö–∞. –û—Ä–ª—ã –æ–±–ª–∞–¥–∞—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é –≤–∏–¥–µ—Ç—å —Ü–µ–ª–∏ –Ω–∞ –±–æ–ª—å—à–æ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏, –Ω–µ —Ç–µ—Ä—è—è –ø—Ä–∏ —ç—Ç–æ–º —Å–≤—è–∑–∏ —Å –∑–µ–º–ª—ë–π. –≠—Ç–æ –∂–∏–≤–æ—Ç–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ—á–µ—Ç–∞—é—Ç –≤ —Å–µ–±–µ –∫–∞–∫ –º–æ—â—å, —Ç–∞–∫ –∏ –∫—Ä–∞—Å–æ—Ç—É, —Å–ø–æ—Å–æ–±–Ω—ã–µ –ø—Ä–∏—Å–ø–æ—Å–∞–±–ª–∏–≤–∞—Ç—å—Å—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –∏ –ø—Ä–µ–æ–¥–æ–ª–µ–≤–∞—Ç—å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è.", "https://static6.depositphotos.com/1000847/647/i/450/depositphotos_6474531-stock-photo-eagle-close-up.jpg"),
        ('2.', '4.'): ("–õ–∏—Å–∞ - –º–µ—Ç–∞—Ñ–æ—Ä–∞ —Ö–∏—Ç—Ä–æ—Å—Ç–∏ –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏. –õ–∏—Å—ã –∏–∑–≤–µ—Å—Ç–Ω—ã —Å–≤–æ–µ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é –≤—ã–∂–∏–≤–∞—Ç—å –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö, –∏—Å–ø–æ–ª—å–∑—É—è –æ—Å—Ç—Ä—ã–π —É–º –∏ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –û–Ω–∏ —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É—é—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–∞—Ö–æ–¥–∏—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ –ª–µ–≥–∫–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ –Ω–æ–≤—ã–º –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞–º, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–∏ —ç—Ç–æ–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ —Å–∏–ª—É.", "https://media.istockphoto.com/id/516318760/ru/%D1%84%D0%BE%D1%82%D0%BE/red-fox-vulpes-vulpes.jpg?s=612x612&w=0&k=20&c=6ZbE9z2TK2Jf7ZuRzwZmm1p89jJebHCBe112cisRuj4="),
        ('3.', '4.'): ("–ß–µ—Ä–µ–ø–∞—Ö–∞ - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –º—É–¥—Ä–æ—Å—Ç—å, –¥–æ–ª–≥–æ–ª–µ—Ç–∏–µ –∏ —Å—Ç–æ–π–∫–æ—Å—Ç—å. –ß–µ—Ä–µ–ø–∞—Ö–∏ –∂–∏–≤—É—Ç –¥–æ–ª–≥–æ, –¥–≤–∏–≥–∞—é—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç–∏–≥–∞—é—Ç —Å–≤–æ–µ–π —Ü–µ–ª–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è –Ω–µ–ø–æ–∫–æ–ª–µ–±–∏–º–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Å–µ–±–µ –∏ —Å–≤–æ–∏—Ö —Å–∏–ª–∞—Ö. –û–Ω–∏ –Ω–∞–ø–æ–º–∏–Ω–∞—é—Ç –æ –≤–∞–∂–Ω–æ—Å—Ç–∏ —Ç–µ—Ä–ø–µ–Ω–∏—è, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –ª–∏—Ü–æ–º —Ç—Ä—É–¥–Ω–æ—Å—Ç–µ–π –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –≤ –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.", "https://st.depositphotos.com/2021333/2715/i/450/depositphotos_27155705-stock-photo-green-sea-turtle.jpg"),
    }

    if len(max_categories) == 1:
        return totem_info[max_categories[0]]

    answ = bot.send_message(message.chat.id, text="–í–∞—à –æ—Ç–≤–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω!")
    bot.register_next_step_handler(answ, ask_question)


# 9. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞.
if __name__ == '__main__':
    bot.infinity_polling()